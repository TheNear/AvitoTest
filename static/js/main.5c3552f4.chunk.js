(this.webpackJsonpavitotest=this.webpackJsonpavitotest||[]).push([[0],[,,,,,,,,,function(t,e,n){t.exports={background:"Modal_background__2dZn8",container:"Modal_container__1cHvm",showModal:"Modal_showModal__3kmBs",image:"Modal_image__1KTTg",button:"Modal_button__Cf6Lr"}},function(t,e,n){t.exports={wrapper:"EventPopup_wrapper__1pGm7",show:"EventPopup_show__3Zw12",showPopup:"EventPopup_showPopup__2cYv4",hidden:"EventPopup_hidden__2igYz",hidePopup:"EventPopup_hidePopup__1osGK",error:"EventPopup_error__2yJMa",warn:"EventPopup_warn__2Pjid",success:"EventPopup_success__3T3o7"}},function(t,e,n){t.exports={form:"CommentForm_form__1PNSl",input:"CommentForm_input__2arJi",button:"CommentForm_button__3QWJm"}},function(t,e,n){t.exports={list:"Comments_list__W5b6z",wrapper:"Comments_wrapper__OgeV7",showComment:"Comments_showComment__3xA6V",date:"Comments_date__A_z6t",text:"Comments_text__1rcuO"}},,,,function(t,e,n){t.exports={footer:"Footer_footer__J_pRT",copyright:"Footer_copyright__3JWuL"}},function(t,e,n){t.exports={header:"Header_header__1-PPi",title:"Header_title__rv7BQ"}},function(t,e,n){t.exports={button:"Thumbnail_button__1UWxn",showThumbnail:"Thumbnail_showThumbnail__3NNP0",image:"Thumbnail_image__yRRdF"}},function(t,e,n){t.exports={thumbnails:"ThumbnailList_thumbnails__Ht_oH"}},,,,,,,function(t,e,n){},function(t,e,n){},,function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(2),c=n.n(r),o=n(13),s=n.n(o),i=(n(26),n(27),n(16)),u=n.n(i),p=function(){return Object(a.jsx)("footer",{className:u.a.footer,children:Object(a.jsx)("p",{className:u.a.copyright,children:"\xa9 2018-2019"})})},m=n(17),l=n.n(m),d=function(){return Object(a.jsx)("header",{className:l.a.header,children:Object(a.jsx)("h1",{className:l.a.title,children:"TEST APP"})})},h=n(1),b=n.n(h),f=n(3),j=n(5),_=n(6),x=n(8),v=n(7),O="https://boiling-refuge-66454.herokuapp.com/",g=function(){var t=Object(f.a)(b.a.mark((function t(e){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if((n=t.sent).ok){t.next=5;break}throw Error(n.statusText);case 5:return t.abrupt("return",n.json());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(f.a)(b.a.mark((function t(e,n){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},redirect:"follow",body:n},t.next=3,fetch(e,a);case 3:if((r=t.sent).ok){t.next=6;break}throw Error(r.statusText);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),k=function(){var t=Object(f.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",g("".concat(O,"images")));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=Object(f.a)(b.a.mark((function t(e){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",g("".concat(O,"images/").concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(f.a)(b.a.mark((function t(e,n){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(O,"images/").concat(e,"/comments"),r=JSON.stringify(n),t.next=4,w(a,r);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),N=n(10),T=n.n(N),E=document.getElementById("popup"),H=function(t){Object(x.a)(n,t);var e=Object(v.a)(n);function n(t){var a;return Object(j.a)(this,n),(a=e.call(this,t)).componentDidMount=function(){setTimeout((function(){a.setState({show:!1}),setTimeout((function(){a.props.clear()}),600)}),a.props.lifetime||5e3)},a.state={show:!0},a}return Object(_.a)(n,[{key:"render",value:function(){var t=this.props,e=t.content,n=t.popupType,r=this.state.show;return Object(o.createPortal)(Object(a.jsx)("div",{className:"".concat(T.a.wrapper," ").concat(r?T.a.show:T.a.hidden," ").concat(n&&T.a[n]),children:e}),E)}}]),n}(r.Component),S=n.p+"static/media/Loader.3aeb6136.svg",P=function(){return Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:S,alt:"Loading SVG"})})},L=n(20),D=n(14),I=n(4),M=n(9),F=n.n(M),J=n(11),B=n.n(J),W=function(t){var e=t.name,n=t.comment,r=t.changeInputHandler,c=t.submitHandler;return Object(a.jsxs)("form",{action:"push",className:B.a.form,onSubmit:c,children:[Object(a.jsx)("input",{autoFocus:!0,type:"text",name:"name",id:"comment-form-author",required:!0,minLength:3,maxLength:25,value:e,onChange:r,placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",className:B.a.input}),Object(a.jsx)("input",{type:"text",name:"comment",required:!0,minLength:3,maxLength:300,value:n,id:"comment-form-content",placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:r,className:B.a.input}),Object(a.jsx)("button",{className:B.a.button,type:"submit",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})]})},z=function(t){var e=Date.now();return{text:t.comment,date:e,id:e}},A=n(12),G=n.n(A),R=function(t){var e=t.data;return Object(a.jsx)("div",{className:G.a.list,children:e.map((function(t){return Object(a.jsxs)("div",{className:G.a.wrapper,children:[Object(a.jsx)("p",{className:G.a.date,children:(e=t.date,new Date(e).toLocaleDateString())}),Object(a.jsx)("p",{className:G.a.text,children:t.text})]},t.id);var e}))})},V=function(t){Object(x.a)(n,t);var e=Object(v.a)(n);function n(t){var a;return Object(j.a)(this,n),(a=e.call(this,t)).clearErrors=function(){a.setState({error:""})},a.getImageData=Object(f.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y(a.props.id);case 3:e=t.sent,a.setState((function(t){return Object(I.a)(Object(I.a)({},t),{},{data:e})})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a.setState({error:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),a.changeInputHandler=function(t){var e=t.currentTarget,n=e.value,r=e.name;a.setState((function(t){return{form:Object(I.a)(Object(I.a)({},t.form),{},Object(D.a)({},r,n))}}))},a.submitHandler=function(){var t=Object(f.a)(b.a.mark((function t(e){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,n=a.props.id,r=z(a.state.form),t.next=6,C(n,a.state.form);case 6:a.setState((function(t){return t.data?Object(I.a)(Object(I.a)({},t),{},{data:Object(I.a)(Object(I.a)({},t.data),{},{comments:[].concat(Object(L.a)(t.data.comments),[r])}),form:{name:"",comment:""}}):t})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a.setState({error:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),a.pressEscHandler=function(t){"Escape"===t.key&&a.props.closeModalHandler()},a.componentDidMount=function(){a.getImageData(),window.addEventListener("keydown",a.pressEscHandler)},a.componentWillUnmount=function(){window.removeEventListener("keydown",a.pressEscHandler)},a.state={error:"",data:null,form:{name:"",comment:""}},a}return Object(_.a)(n,[{key:"render",value:function(){var t=this.props.closeModalHandler,e=this.state,n=e.data,r=e.form,c=e.error,o=r.name,s=r.comment;return Object(a.jsxs)("div",{className:F.a.background,children:[c&&Object(a.jsx)(H,{content:c,clear:this.clearErrors,popupType:"error"}),n?Object(a.jsxs)("div",{className:F.a.container,children:[Object(a.jsx)("img",{className:F.a.image,src:n.url,alt:"fullsize"}),Object(a.jsx)(R,{data:n.comments}),Object(a.jsx)(W,{name:o,comment:s,submitHandler:this.submitHandler,changeInputHandler:this.changeInputHandler}),Object(a.jsx)("button",{onClick:t,type:"button",className:F.a.button,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e"})]}):Object(a.jsx)("div",{className:F.a.container,children:"Loading..."})]})}}]),n}(r.Component),q=n(18),K=n.n(q),Q=function(t){var e=t.data,n=t.clickHandler;return Object(a.jsx)("button",{onClick:function(t){t.preventDefault(),n(e.id)},type:"button",className:K.a.button,children:Object(a.jsx)("img",{className:K.a.image,src:e.url,alt:"thumbnail"})},e.id)},U=n(19),Y=n.n(U),Z=function(t){var e=t.data,n=t.clickHandler;return Object(a.jsx)("main",{className:Y.a.thumbnails,children:e.map((function(t){return Object(a.jsx)(Q,{data:t,clickHandler:n},t.id)}))})},X=function(t){Object(x.a)(n,t);var e=Object(v.a)(n);function n(t){var a;return Object(j.a)(this,n),(a=e.call(this,t)).clearErrors=function(){a.setState({error:""})},a.loadData=Object(f.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.setState({isLoading:!0});case 3:return t.next=5,k();case 5:e=t.sent,a.setState({data:e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a.setState({error:t.t0.message});case 12:return t.prev=12,a.setState({isLoading:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])}))),a.componentDidMount=function(){a.loadData()},a.onThumbnailClick=function(t){a.setState({openedImageID:t})},a.onCloseButtonClick=function(){a.setState({openedImageID:null})},a.state={isLoading:!1,data:[],openedImageID:null,error:""},a}return Object(_.a)(n,[{key:"render",value:function(){var t=this.state,e=t.openedImageID,n=t.data,r=t.isLoading,c=t.error;return Object(a.jsxs)(a.Fragment,{children:[c&&Object(a.jsx)(H,{content:c,clear:this.clearErrors,popupType:"error"}),r?Object(a.jsx)(P,{}):Object(a.jsx)(Z,{data:n,clickHandler:this.onThumbnailClick}),e&&Object(a.jsx)(V,{id:e,closeModalHandler:this.onCloseButtonClick})]})}}]),n}(r.Component),$=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(d,{}),Object(a.jsx)(X,{}),Object(a.jsx)(p,{})]})};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)($,{})}),document.getElementById("root"))}],[[29,1,2]]]);
//# sourceMappingURL=main.5c3552f4.chunk.js.map